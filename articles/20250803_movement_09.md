---
title: "【Movementテストノード挑戦記】09章：よくあるエラー対応とトラブルシューティング"
series: "Movementテストノード挑戦記：バリデータへの第一歩"
authors:
  - "JapanNomu"
published: 2025-08-11T12:00:00+09:00
topics:
  - "仮想通貨"
  - "バリデータ"
  - "Movement"
  - "Move言語"
  - "ノード起動"
  - "トラブルシュート"
---

# 【Movementテストノード挑戦記】09章：よくあるエラー対応とトラブルシューティング

---

この章では、Movementテストノードの構築・運用で実際に遭遇したエラーと、  
それに対する具体的な対応策や、再現性のあるトラブルシューティング手順をまとめます。

---

## 1. APTパッケージ・依存関係エラー

### 事例1：`libz-dev`のバージョン指定でエラー

- **エラー内容：**  
  `E: Version '1:1.2.11.dfsg-2ubuntu9.2' for 'libz-dev' was not found`
- **原因：**  
  Ubuntu 22.04のパッケージに該当バージョンが存在しない。  
  実際は`zlib1g-dev`のみでOK。
- **対策：**  
  `libz-dev`のバージョン指定インストールをやめ、`zlib1g-dev`だけをインストールする。

---

### 事例2：パッケージバージョン不一致による依存エラー

- **内容：**  
  依存パッケージがaptの更新でバージョン違いになるケース
- **対策：**  
  コマンドでバージョンを明示してインストール  
  （例: `apt install clang=1:14.0-55~exp2`）  
  それでも無い場合はパッケージリストを見直し、近いバージョンを指定してリトライ。

---

## 2. Rustバージョン・ツールチェーンの不一致

### 事例3：`rustc`や`cargo`のバージョン違いによるビルド失敗

- **内容：**  
  ビルド途中で「要求バージョンのRustが必要」等のエラー
- **対策：**  
  `rustup default 1.88.0`など、**必ず公式指定・検証済みバージョンで固定**  
  `rustc --version`で確認し、合っていなければ再度セットアップ

---

## 3. メモリ不足・swap関連エラー

### 事例4：ビルド途中でプロセスがkillされる/`Killed`表示

- **内容：**  
  `cargo build --release`の途中でメモリ不足によりプロセスが落ちる（KilledやOOM等）
- **対策：**  
  swap領域を2GB以上追加  
  `/swapfile`や`/var/spool/swap/swapfile`で計4GBを推奨  
  `-j 1`を付けてビルド（`cargo build --release -j 1`）

---

## 4. config.json・設定ミス

### 事例5：`config.json`の編集ミスでノード起動失敗

- **内容：**  
  手動編集でカンマやクォートの抜け、key/value不整合など
- **対策：**  
  編集前にバックアップを取り、`jq`や`python -m json.tool`などで構文チェック推奨
- **例：**  
  allow_sync_from_zero を true に書き換える  
  sed -i 's/"allow_sync_from_zero": false/"allow_sync_from_zero": true/' /root/.movement/config.json

---

## 5. ノード起動時・運用時のエラー

### 事例6：`--config`オプションの有無でコマンド実行不可

- **内容：**  
  バージョンによっては`--config`オプションが認識されない場合がある
- **対策：**  
  ドキュメント・READMEの最新版を参照し、  
  起動コマンドの正誤を必ず最新手順に合わせる
  - 例：  
    誤：`./movement-full-node da run --config /root/.movement/config.json`  
    正：`./movement-full-node da run`

---

### 事例7：同期や接続エラー（ネットワーク・ポート関連）

- **内容：**  
  ノードが正しくsyncしない、接続エラーが繰り返し出る
- **対策：**  
  - VPSのファイアウォール設定（ufwやSecurityGroup）を確認し、必要なポート開放
  - VPS・クラウド側のネットワーク制限を再確認
  - ログで「エラー」「失敗」などのワードを探し、出力内容を精査

---

## 6. その他（再現性重視の落とし穴）

- **コマンドやファイル名のtypo・小さなミス**  
  → スクリプトやドキュメントを複数回なぞり直し、「完全再現」を繰り返すことが重要

- **依存する外部リソースやバージョン管理のズレ**  
  → `Cargo.lock`や`git checkout`によるバージョン固定を徹底

---

## 7. トラブルシュートの全体方針

- **「何を・どのバージョン・どのタイミングで」**行ったか、必ず記録を取る
- **不明点は公式ドキュメント・コミュニティ（Discord/フォーラム）・GitHub Issuesも活用**
- **問題が起きたら、手順を最初からなぞり直す「再現性」を重視**
- **必ずエラーログやコマンド出力をコピペ保存・共有できる形で残すこと**

---

この章では、実際のノード構築・運用で発生しがちな典型的エラーと  
「なぜそうなるのか」「どこを見直せばよいか」を、  
具体的な再現性・検証観点とあわせて徹底的にまとめました。

---

次章では、バージョン固定や再現性確保のポイントについて解説します。

